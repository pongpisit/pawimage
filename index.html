<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cloudflare Image Transformation Showcase</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#f9fafb] text-gray-800">
  <header class="bg-[#f38020] text-white py-6 shadow-md">
    <div class="text-center">
      <h1 class="text-3xl font-bold">Cloudflare Image Transformation Showcase</h1>
      <p class="text-sm mt-1">Demonstration of Cloudflare's URL-based image manipulation features and Workers-based overlays</p>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-10">
    <section class="grid gap-8">
      <script>
        const transformations = [
          {
            name: "Original Image",
            path: "/src/alfa.jpg",
            explanation: "Unmodified image from origin.",
            url: "https://pawimage.pongpisit.com/src/alfa.jpg",
            class: "mt-3 rounded-lg"
          },
          {
            name: "Resize Width (200px)",
            path: "/cdn-cgi/image/width=200/src/alfa.jpg",
            explanation: "Scales image to 200px width. Aspect ratio is preserved.",
            class: "mt-3 rounded-lg"
          },
          {
            name: "Quality (50)",
            path: "/cdn-cgi/image/quality=50/src/alfa.jpg",
            explanation: "Reduces image quality to 50%. File size is smaller."
          },
          {
            name: "Blur (20)",
            path: "/cdn-cgi/image/blur=20/src/alfa.jpg",
            explanation: "Adds a blur effect with radius 20."
          },
          {
            name: "Brightness (1.5)",
            path: "/cdn-cgi/image/brightness=1.5/src/alfa.jpg",
            explanation: "Increases brightness by 1.5x (1.0 is default)."
          },
          {
            name: "Contrast (2.0)",
            path: "/cdn-cgi/image/contrast=2.0/src/alfa.jpg",
            explanation: "Increases contrast. 2.0 = high contrast."
          },
          {
            name: "Flip Horizontal",
            path: "/cdn-cgi/image/flip=h/src/alfa.jpg",
            explanation: "Horizontally flips the image (mirror effect)."
          },
          {
            name: "Rotate 90°",
            path: "/cdn-cgi/image/rotate=90/src/alfa.jpg",
            explanation: "Rotates image 90° clockwise."
          },
          {
            name: "Sharpen (3)",
            path: "/cdn-cgi/image/sharpen=3/src/alfa.jpg",
            explanation: "Applies sharpening with strength 3 (range 0–10)."
          },
          {
            name: "Saturation (0 - grayscale)",
            path: "/cdn-cgi/image/saturation=0/src/alfa.jpg",
            explanation: "Sets saturation to 0. Image becomes grayscale."
          },
          {
            name: "Gamma (1.5)",
            path: "/cdn-cgi/image/gamma=1.5/src/alfa.jpg",
            explanation: "Adjusts gamma (exposure curve) by 1.5x."
          },
          {
            name: "Fit: cover (200x200)",
            path: "/cdn-cgi/image/fit=cover,width=200,height=200/src/alfa.jpg",
            explanation: "Fills 200x200 box. Crops excess to maintain ratio."
          },
          {
            name: "Trim (20;30;20;0)",
            path: "/cdn-cgi/image/trim=20;30;20;0/src/alfa.jpg",
            explanation: "Trims 20px top/bottom, 30px right from original image."
          },
          {
            name: "Fit: pad (bg=gray)",
            path: "/cdn-cgi/image/fit=pad,width=200,height=200,background=gray/src/alfa.jpg",
            explanation: "Pads the image to 200x200 with gray background."
          },
          {
            name: "DPR (2x)",
            path: "/cdn-cgi/image/dpr=2,width=200/src/alfa.jpg",
            explanation: "Scales for Retina displays using DPR=2. Improves clarity."
          },
          {
            name: "Format AVIF",
            path: "/cdn-cgi/image/format=avif/src/alfa.jpg",
            explanation: "Converts image to AVIF format. Highly efficient."
          },
          {
            name: "Metadata (none)",
            path: "/cdn-cgi/image/metadata=none/src/alfa.jpg",
            explanation: "Removes all EXIF metadata (GPS, camera info)."
          },
          {
            name: "Overlay: Cloudflare Logo",
            path: "/worker/overlay-logo.jpg",
            url: "https://pawimage.pongpisit.com/worker/overlay-logo.jpg",
            explanation: "Adds Cloudflare logo to bottom-right using Workers `draw[]`. Logo is semi-transparent (opacity 0.8).",
            class: "mt-3 rounded-lg w-full max-h-[500px] object-contain"
          },
          {
            name: "Watermark: Repeated Badge",
            path: "https://pawimage.pongpisit.com/worker/watermarked-alfa.jpg",
            url: "https://pawimage.pongpisit.com/src/alfa.jpg",
            explanation: "Applies tiled watermark using Cloudflare badge via `draw[]` with repeat and 0.2 opacity.",
            class: "mt-3 rounded-lg w-full max-h-[500px] object-contain"
          }
        ];

        transformations.forEach(t => {
          const src = t.url || `https://pawimage.pongpisit.com${t.path}`;
          const imgClass = t.class || "mt-3 rounded-lg w-full max-h-[500px] object-contain";
          document.write(`
            <div class="bg-white rounded-xl shadow p-6">
              <h2 class="text-xl font-semibold text-[#f38020]">${t.name}</h2>
              <code class="text-sm bg-gray-100 rounded px-2 py-1 block mt-2">${t.path}</code>
              <img class="${imgClass}" src="${src}" alt="${t.name}" />
              <p class="mt-2 text-sm text-gray-600 italic">${t.explanation}</p>
            </div>
          `);
        });
      </script>
    </section>
  </main>
</body>
</html>
